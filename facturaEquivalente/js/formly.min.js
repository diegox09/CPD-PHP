(function(a){a.fn.formly=function(b,c){var d={theme:"Base",onBlur:true};if(b){a.extend(d,b)}var e=this.attr("id");if(!e){e=Math.ceil(Math.random()*5e3);this.attr("id",e)}this.append('<div style="clear:both;"></div><div class="formlyAlerts"></div>');this.addClass("formlyWrapper-"+d["theme"]);if(this.attr("width")){this.css("width",this.attr("width"))}if(this.attr("subtitle")||this.attr("title")){this.prepend("<hr/>")}if(this.attr("subtitle")){this.prepend("<h2>"+this.attr("subtitle")+"</h2>")}if(this.attr("title")){this.prepend("<h1>"+this.attr("title")+"</h1>")}this.children().each(function(b,c){if(a(c).attr("place")){if(a(c).attr("type")=="password"){var g="pwPlace-"+a(c).attr("name");a(c).after('<input type="text" id="'+g+'" value="'+a(c).attr("place")+'" class="formlyPWPlaces" />');a("#"+g).css("color","#000");a(c).hide();a("#"+g).show();a("#"+g).focus(function(){a("#"+g).hide();a(c).show();a(c).focus()});a(c).blur(function(){if(!a(c).val()){a("#"+g).show();a(c).hide()}})}else{a(c).val(a(c).attr("place"));a(c).css("color","#000")}}a(c).blur(function(){if(!a(c).val()||a(c).val()==a(c).attr("pre-fix")){if(a(c).attr("type")!="password"){a(c).val(a(c).attr("place"));a(c).css("color","#000")}}if(a(c).attr("pre-fix")){var b=a(c).val();var e=a(c).attr("pre-fix");if(e.length==1){if(b.charAt(0)!=e&&a(c).val()!=a(c).attr("place")){a(c).val(e+b)}}else{if(b.indexOf(e)==-1&&a(c).val()!=a(c).attr("place")){a(c).val(e+b)}}}if(d["onBlur"]){if(a(c).attr("validate")){f.validate(c)}if(a(c).attr("require")){f.require(c)}if(a(c).attr("match")){f.match(c)}}});a(c).focus(function(){if(a(c).attr("place")){if(a(c).val()==a(c).attr("place")){a(c).val("");a(c).css("color","")}}if(a(c).attr("pre-fix")&&!a(c).val()){a(c).val("");a(c).val(a(c).attr("pre-fix"))}});a("#"+e).find("input:reset").click(function(b){b.preventDefault();a("#"+e).find("input:text, input:password, input:checkbox, input:radio").each(function(){a(this).css("border-color","");if(a(this).is(":checked")){a(this).attr("checked",false)}if(a(this).attr("place")){if(a(this).attr("type")!="password"){a(this).val(a(this).attr("place"));a(this).css("color","#000")}else{if(a(this).hasClass("formlyPWPlaces")){a(this).show();a(this).prev("input").hide()}else{a(this).val("")}}}else{if(a(this).hasClass("formlyPWPlaces")){a(this).show();a(this).prev("input").hide()}else{a(this).val("")}}});a("#"+e).find(".formlyAlert").each(function(){a(this).fadeOut(function(){a(this).remove()})})})});this.submit(function(b){var d=true;a(this).find("input").each(function(){if(a(this).attr("require")){if(!f.require(this)){d=false}}if(a(this).attr("validate")){if(!f.validate(this)){d=false}}if(a(this).attr("match")){if(!f.match(this)){d=false}}});if(!d){b.preventDefault()}else{if(c){b.preventDefault();c(a(this).serialize())}}});var f={validateString:function(a,b){if(a=="email"){var c=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(c.test(b)){return true}else{return false}}else if(a=="http"){var c=/http:\/\/[A-Za-z0-9\.-]{3,}\.[A-Za-z]{2,3}/i;if(c.test(b)){return true}else{return false}}},validate:function(b){var c=e+a(b).attr("name");if(a(b).attr("validate")=="email"){var d=f.validateString("email",a(b).val());var g="Correo Electronico"}else if(a(b).attr("validate")=="http"){var d=f.validateString("http",a(b).val());var g="web address"}if(!d){if(!a("#"+c).is(":visible")){a("#"+e).find(".formlyAlerts").append('<div class="formlyInvalid formlyAlert" id="'+c+'">Valor No Valido: '+g+" </div>");a("#"+c).fadeIn()}var h=a("#"+c).css("background-color");a(b).css("border-color",h);if(a(b).attr("type")=="password"){a(b).next(".formlyPWPlaces").css("border-color",h)}return false}else{a("#"+c).fadeOut(function(){a(this).remove()});a(b).css("border-color","");a(".formlyPWPlaces").css("border-color","");return true}},require:function(b){var c=e+a(b).attr("name");var d=a(b).attr("label")+" ";if(d=="undefined "){d=""}if(!a(b).val()||a(b).val()==a(b).attr("place")){if(!a("#"+c).is(":visible")){a("#"+e).find(".formlyAlerts").append('<div class="formlyRequired formlyAlert" id="'+c+'">Campo Requerido: '+d+"</div>");a("#"+c).fadeIn()}var f=a("#"+c).css("background-color");a(b).css("border-color",f);if(a(b).attr("type")=="password"){a(b).next(".formlyPWPlaces").css("border-color",f)}return false}else if(a(b).attr("type")=="checkbox"&&!a(b).is(":checked")){if(!a("#"+c).is(":visible")){a("#"+e).find(".formlyAlerts").append('<div class="formlyRequired formlyAlert" id="'+c+'">'+d+"Required</div>");a("#"+c).fadeIn();a(b).focus()}var f=a("#"+c).css("background-color");a(b).css("border-color",f);return false}else{a("#"+c).fadeOut(function(){a(this).remove()});a(b).css("border-color","");a(".formlyPWPlaces").css("border-color","");return true}},match:function(b){var c=e+a(b).attr("name");var d=a(b).attr("label")+" ";if(d=="undefined "){d=""}var f=a(b).attr("match");if(a(b).val()!=a("#"+e).find("input[name="+f+"]").val()||!a(b).val()){if(!a("#"+c).is(":visible")){a("#"+e).find(".formlyAlerts").append('<div class="formlyInvalid formlyAlert" id="'+c+'">'+d+"Does not match</div>");a("#"+c).fadeIn()}var g=a("#"+c).css("background-color");a(b).css("border-color",g);if(a(b).attr("type")=="password"){a(b).next(".formlyPWPlaces").css("border-color",g)}return false}else{a("#"+c).fadeOut(function(){a(this).remove()});a(b).css("border-color","");a(".formlyPWPlaces").css("border-color","");return true}}}}})(jQuery)