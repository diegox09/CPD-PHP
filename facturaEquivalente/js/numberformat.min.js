(function(a){a.fn.priceFormat=function(b){var c={prefix:"$ ",centsSeparator:"",thousandsSeparator:".",limit:false,centsLimit:0,clearPrefix:false,allowNegative:true};var b=a.extend(c,b);return this.each(function(){function r(){if(a.trim(e)!=""&&j){var b=c.val().split(e);c.val(b[1])}}function q(){var a=c.val();c.val(e+a)}function p(){var a=c.val();var b=n(a);if(a!=b)c.val(b)}function o(a){var b=a.keyCode?a.keyCode:a.which;var d=String.fromCharCode(b);var e=false;var f=c.val();var g=n(f+d);if(b>=48&&b<=57||b>=96&&b<=105)e=true;if(b==8)e=true;if(b==9)e=true;if(b==13)e=true;if(b==46)e=true;if(b==37)e=true;if(b==39)e=true;if(k&&(b==189||b==109))e=true;if(!e){a.preventDefault();a.stopPropagation();if(f!=g)c.val(g)}}function n(a){var b=m(l(a));var c="";var d=0;var h=b.substr(b.length-i,i);var j=b.substr(0,b.length-i);b=j+f+h;if(g){for(var n=j.length;n>0;n--){char=j.substr(n-1,1);d++;if(d%3==0)char=g+char;c=char+c}if(c.substr(0,1)==g)c=c.substring(1,c.length);b=c+f+h}if(k&&a.indexOf("-")!=-1&&(j!=0||h!=0))b="-"+b;if(e)b=e+b;return b}function m(a){while(a.length<i+1)a="0"+a;return a}function l(a){var b="";for(var c=0;c<a.length;c++){char=a.charAt(c);if(b.length==0&&char==0)char=false;if(char&&char.match(d)){if(h){if(b.length<h)b=b+char}else{b=b+char}}}return b}var c=a(this);var d=/[0-9]/;var e=b.prefix;var f=b.centsSeparator;var g=b.thousandsSeparator;var h=b.limit;var i=b.centsLimit;var j=b.clearPrefix;var k=b.allowNegative;a(this).bind("keydown",o);a(this).bind("keyup",p);if(j){a(this).bind("focusout",function(){r()});a(this).bind("focusin",function(){q()})}if(a(this).val().length>0){p();r()}})}})(jQuery)