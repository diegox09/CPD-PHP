var tipo_actividad=["","Industrial","Comercial","Servicios","Financiera"];var tipo_concepto=["","Honorarios","Servicios","Compras","Arrendamientos","Otras Retenciones"];(function(a){a.fn.fixedMenu=function(){return this.each(function(){var b=a(this);b.find("a.submenu").bind("click",function(){if(a(this).parent().hasClass("active")){a(this).parent().removeClass("active")}else{a(this).parent().parent().find(".active").removeClass("active");a(this).parent().addClass("active")}});a("a.item").click(function(){b.find(".active").removeClass("active")})})}})(jQuery);(function(a){a.fn.listaPorcentaje=function(){a.getJSON("x09/porcentaje.php",{id_porcentaje:"",opc:"all"},function(b){if(b.login){a("#porcentajes").empty();if(b.consulta){a("#porcentajes").append('<option value="0" selected >Seleccionar</option>');var c=0;for(var d=0;d<b.idPorcentaje.length;d++){if(b.tipoConcepto[d]!=c){c=parseInt(b.tipoConcepto[d]);a("#porcentajes").append('<optgroup id="or_'+c+'" label="'+tipo_concepto[c]+'"></outgroup>')}a("#or_"+c).append('<option value="'+b.idPorcentaje[d]+'" >'+b.concepto[d]+"</option>")}}}else a("#xsoft").load("login.html")})}})(jQuery);(function(a){a.fn.listaReteica=function(){a.getJSON("x09/reteica.php",{id_reteica:"",opc:"all"},function(b){if(b.login){a("#id_reteica").empty();if(b.consulta){a("#id_reteica").append('<option value="0" selected >Seleccionar</option>');var c=0;for(var d=0;d<b.idReteica.length;d++){if(b.tipoActividad[d]!=c){c=parseInt(b.tipoActividad[d]);a("#id_reteica").append('<optgroup id="oi_'+c+'" label="'+tipo_actividad[c]+'"></outgroup>')}a("#oi_"+c).append('<option value="'+b.idReteica[d]+'" >'+b.actividad[d]+" - ("+b.tarifa[d]+")</option>")}}}else a("#xsoft").load("login.html")})}})(jQuery);(function(a){a.fn.listaProgramas=function(){a.getJSON("x09/programa.php",{id_programa:"",tipo_factura:"",opc:"all"},function(b){if(b.login){a("#programas").empty();if(b.consulta){a("#programas").append('<option value="0" selected >Seleccionar</option>');for(var c=0;c<b.idPrograma.length;c++){a("#programas").append('<option value="'+b.idPrograma[c]+'" >'+b.nombre[c]+" - "+b.inicFactura[c]+"</option>")}}}else a("#xsoft").load("login.html")})}})(jQuery);(function(a){a.fn.listaProgramas_u=function(){a("#cargando").show();a.getJSON("x09/programa.php",{id_programa:"",tipo_factura:"",opc:"all"},function(b){if(b.login){a("#programas_u").empty();if(b.consulta){a("#programas_u").append('<option value="0" selected >Seleccionar</option>');for(var c=0;c<b.idPrograma.length;c++){a("#programas_u").append('<option value="'+b.idPrograma[c]+'" >'+b.nombre[c]+" - "+b.inicFactura[c]+"</option>")}a.fn.tabla_up()}}else a("#xsoft").load("login.html");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.factura=function(b){a("#cargando").show();a("#formato").hide();a("#administracion").hide();a.fn.listaPorcentaje();a.fn.listaReteica();a.fn.listaProgramas();a.fn.limpiar();a.getJSON("x09/programa.php",{id_programa:"",tipo_factura:b,opc:""},function(b){if(b.login){a("#mostrar").empty();if(b.consulta){if(b.inicFactura[0]=="FE")b.inicFactura[0]="No.";a("#fecha").attr("value",b.fecha);a.fn.fecha();a("#inic_factura").html(b.inicFactura[0]);a("#desc_factura").html(b.tipoFactura[0]);a("#ciudad").attr("value",b.ciudad[0]);a("#copia_inic_factura").html(b.inicFactura[0]);a("#copia_desc_factura").html(b.tipoFactura[0]);a("#copia_ciudad").attr("value",b.ciudad[0]);a("#mostrar").append('<div class="titulo_lista">'+b.tipoFactura[0]+'</div><ul id="lista"></ul>');for(var c=0;c<b.idPrograma.length;c++){a("#lista").append('<li class="lista"><a href="#" class="formato_factura" id="'+b.idPrograma[c]+'" title="'+b.contrato[c]+'" alt="'+b.direccion[c]+'">'+b.nombre[c]+"</a></li>")}}else alert("Error: No tiene asociado ningun Programa")}else a("#xsoft").load("login.html");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.limpiar=function(){a("#porcentajes").find('option[value="0"]').attr("selected","selected");a("#id_reteica").find('option[value="0"]').attr("selected","selected");a("#numero_factura").attr("value","");a("#id_persona").attr("value","");a("#nit_persona").attr("value","");a("#persona_natural").attr("value","");a("#direccion_persona").attr("value","");a("#actividad_economica").attr("value","");a("#tarifa_iva").attr("value","");a("#tarifa_reteiva").attr("value","");a("#retefuente").attr("value","");a("#impuesto_renta").attr("value","");a("#reteica").attr("value","");a("#copia_numero_factura").attr("value","");a("#copia_nit_persona").attr("value","");a("#copia_persona_natural").attr("value","");a("#copia_direccion_persona").attr("value","");a("#copia_actividad_economica").attr("value","");a("#copia_tarifa_iva").attr("value","");a("#copia_tarifa_reteiva").attr("value","");a("#copia_retefuente").attr("value","");a("#copia_reteica").attr("value","");for(var b=1;b<10;b++){a("#referencia_"+b).attr("value","");a("#descripcion_"+b).attr("value","");a("#cantidad_"+b).attr("value","");a("#valor_"+b).attr("value","");a("#valor_"+b).priceFormat();a("#copia_referencia_"+b).attr("value","");a("#copia_descripcion_"+b).attr("value","");a("#copia_cantidad_"+b).attr("value","");a("#copia_valor_"+b).attr("value","");a("#copia_valor_"+b).priceFormat()}a.fn.subtotal();a("#estado_factura").removeAttr("checked");a(".anulada").hide();a("#nombre_user").html("")}})(jQuery);(function(a){a.fn.cargar=function(b){a("#fecha").attr("value",b.fecha);a.fn.fecha();a("#numero_factura").attr("value",b.numeroFactura);a("#ciudad").attr("value",b.ciudad);a("#id_persona").attr("value",b.idCliente);a("#nit_persona").attr("value",b.nitCliente);a("#persona_natural").attr("value",b.nombreCliente);a("#direccion_persona").attr("value",b.direccionCliente);a("#actividad_economica").attr("value",b.actividadEconomica);a("#tarifa_iva").attr("value",b.tarifaIva+"%");a("#tarifa_reteiva").attr("value",b.tarifaRetencionIva+"%");a("#retefuente").attr("value",b.retencionFuente+"%");if(b.impuestoRenta>0)a("#impuesto_renta").attr("value",b.impuestoRenta);else a("#impuesto_renta").attr("value","");a("#reteica").attr("value",b.retencionIca);a("#copia_numero_factura").attr("value",b.numeroFactura);a("#copia_ciudad").attr("value",b.ciudad);a("#copia_nit_persona").attr("value",b.nitCliente);a("#copia_persona_natural").attr("value",b.nombreCliente);a("#copia_direccion_persona").attr("value",b.direccionCliente);a("#copia_actividad_economica").attr("value",b.actividadEconomica);a("#copia_tarifa_iva").attr("value",b.tarifaIva+"%");a("#copia_tarifa_reteiva").attr("value",b.tarifaRetencionIva+"%");a("#copia_retefuente").attr("value",b.retencionFuente+"%");a("#copia_reteica").attr("value",b.retencionIca);var c;for(var d=1;d<10;d++){c=d-1;a("#referencia_"+d).attr("value",b.referencia[c]);a("#copia_referencia_"+d).attr("value",b.referencia[c]);a("#descripcion_"+d).attr("value",b.descripcion[c]);a("#copia_descripcion_"+d).attr("value",b.descripcion[c]);if(b.cantidad[c]!=0){if(b.cantidad[c]==-1)b.cantidad[c]="GL";a("#cantidad_"+d).attr("value",b.cantidad[c]);a("#copia_cantidad_"+d).attr("value",b.cantidad[c])}else{a("#cantidad_"+d).attr("value","");a("#copia_cantidad_"+d).attr("value","")}if(b.valor[c]>0){a("#valor_"+d).attr("value",b.valor[c]);a("#copia_valor_"+d).attr("value",b.valor[c]);a("#valor_"+d).priceFormat();a("#copia_valor_"+d).priceFormat()}else{a("#valor_"+d).attr("value","");a("#copia_valor_"+d).attr("value","")}}if(b.estadoFactura=="2"){a("#estado_factura").attr("checked",true);a(".anulada").show()}else{a("#estado_factura").removeAttr("checked");a(".anulada").hide()}a("#nombre_user").html("Actualizado por: "+b.nombreUser+", Fecha: "+b.fechaActualizacion);a.fn.subtotal()}})(jQuery);(function(a){a.fn.fecha=function(){var b=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"];var c=a("#fecha").attr("value");var d=c.split("-");var e=d[1];if(e>0){a("#mostrar_fecha").html(b[e-1]+" "+d[2]+" DE "+d[0]);a("#copia_mostrar_fecha").html(b[e-1]+" "+d[2]+" DE "+d[0])}}})(jQuery);(function(a){a.fn.actualizar_cliente=function(){var b=a("#id_persona").attr("value");var c=a("#nit_persona").attr("value");var d=a("#persona_natural").attr("value");var e=a("#actividad_economica").attr("value");var f=a("#direccion_persona").attr("value");if(b!=""&&b!=0){a("#cargando").show();a.getJSON("x09/cliente.php",{opc:"update",id_persona:b,nit_persona:c,persona_natural:d,actividad_economica:e,direccion_persona:f},function(b){if(b.login){a("#persona_natural").attr("value",b.nombreCliente[0]);a("#actividad_economica").attr("value",b.actividadEconomica[0]);a("#direccion_cliente").attr("value",b.direccionCliente[0])}else a("#xsoft").load("login.html");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}else{a(this).attr("value","");alert("Por favor digite primero el Nit de la persona")}}})(jQuery);

(function(a){
	a.fn.subtotal=function(){
		var b=0,c,d,e,f,g;
		a("#items tr").each(function(c){
			var d,e,f,h,i;
			h=c+1;
			d=a("#cantidad_"+h).attr("value");
			d=d.replace(/[.]/gi,"");
			e=a("#valor_"+h).attr("value");
			e=e.replace(/[$ .]/gi,"");
			switch(d){
				case"":d=0;break;
				case"GL":d=1;break
			}
			if(e=="")
				e=0;
			if(/^([0-9])*$/.test(d)&&/^([0-9])*$/.test(d)){
				f=parseInt(d)*parseInt(e);
				b=parseInt(b+f);
				if(f>0){
					a("#calcular_subtotal").attr("value",f);
					a("#calcular_subtotal").priceFormat();
					a(this).children(".subtotal").html(a("#calcular_subtotal").attr("value"));
					a("#subtotal_"+h).html(a("#calcular_subtotal").attr("value"))
				}
				else 
					a(this).children(".subtotal").html("")
			}
			else{
				if(d!="G"){
					g=d.length-1;
					d=d.substring(0,g);
					a("#cantidad_"+h).attr("value",d)
				}
			}
		});
		a("#calcular_subtotal").attr("value",b);
		a("#calcular_subtotal").priceFormat();
		a("#total_factura").html(a("#calcular_subtotal").attr("value"));
		a("#copia_total_factura").html(a("#calcular_subtotal").attr("value"));
		var h=a("#tarifa_iva").attr("value");
		if(h=="")h="0";
		h=h.replace(/[%]/gi,"");
		if(/^([0-9])*[.]?[0-9]*$/.test(h)){
			c=b*(h/100);
			a("#calcular_subtotal").attr("value",Math.round(c));
			a("#calcular_subtotal").priceFormat();
			a("#iva_teorico").html(a("#calcular_subtotal").attr("value"));
			a("#copia_iva_teorico").html(a("#calcular_subtotal").attr("value"))
		}
		else{
			g=h.length-1;
			h=h.substring(0,g);
			a("#tarifa_iva").attr("value",h)
		}
		var i=a("#tarifa_reteiva").attr("value");
		if(i=="")i="0";
		i=i.replace(/[%]/gi,"");
		if(/^([0-9])*[.]?[0-9]*$/.test(i)){
			d=c*(i/100);
			a("#calcular_subtotal").attr("value",Math.round(d));
			a("#calcular_subtotal").priceFormat();
			a("#impuesto_asumido").html(a("#calcular_subtotal").attr("value"));
			a("#copia_impuesto_asumido").html(a("#calcular_subtotal").attr("value"))
		}
		else{
			g=i.length-1;
			i=i.substring(0,g);
			a("#tarifa_reteiva").attr("value",i)
		}
		var j=a("#retefuente").attr("value");
		if(j=="0.0%"||j==""){
			var k=a("#impuesto_renta").attr("value");
			if(k=="")
				k="0";
			k=k.replace(/[$ .]/gi,"");
			k=parseInt(k);
			a("#impuesto_renta").attr("value",Math.round(k));
			a("#impuesto_renta").priceFormat();
			a("#copia_impuesto_renta").html(a("#impuesto_renta").attr("value"))
		}
		else{
			j=j.replace(/[%]/gi,"");
			if(/^([0-9])*[.]?[0-9]*$/.test(j)){
				k=b*(j/100);
				a("#calcular_subtotal").attr("value",Math.round(k));
				a("#calcular_subtotal").priceFormat();
				a("#impuesto_renta").attr("value",a("#calcular_subtotal").attr("value"));
				a("#copia_impuesto_renta").html(a("#calcular_subtotal").attr("value"))
			}
		}
		var l=a("#reteica").attr("value");
		if(l=="")l="0*1";
		if(/^([0-9])*[*]?[0-9]*$/.test(l)){
			array=l.split("*");
			e=array[0]/array[1]*b;
			a("#calcular_subtotal").attr("value",Math.round(e));
			a("#calcular_subtotal").priceFormat();
			a("#industria_comercio").html(a("#calcular_subtotal").attr("value"));
			a("#copia_industria_comercio").html(a("#calcular_subtotal").attr("value"))
		}
		else{
			g=l.length-1;
			l=l.substring(0,g);
			a("#reteica").attr("value",l)
		}
		f=b-(k+e);
		a("#calcular_subtotal").attr("value",Math.round(f));
		a("#calcular_subtotal").priceFormat();
		a("#neto_pagar").html(a("#calcular_subtotal").attr("value"));
		a("#copia_neto_pagar").html(a("#calcular_subtotal").attr("value"))
	}
})(jQuery);

(function(a){a.fn.ocultar=function(){a("#mostrar").empty();a("#tabla").empty();a("#tabla_up").empty();a("#admin_p").hide();a("#admin_r").hide();a("#admin_i").hide();a("#admin_u").hide();a("#admin_c").hide();a("#cambiar_c").hide();a("#buscar").hide()}})(jQuery);(function(a){a.fn.buscar=function(){a.fn.listaProgramas();a.fn.ocultar();a("#buscar").show();a("#administracion").show("slow")}})(jQuery);(function(a){a.fn.programa=function(){a("#cargando").show();a.getJSON("x09/programa.php",{id_programa:"",tipo_factura:"",opc:"all"},function(b){if(b.login){if(b.consulta){a.fn.listaProgramas();a.fn.ocultar();a("#admin_p").show();a("#administracion").slideDown("slow");a("#tabla").append('<thead><tr id="cabecera"><th width="5%">No.</th><th width="5%">Tipo</th><th width="20%">Nombre</th><th width="20%">Contrato</th><th width="30%">Direccion</th><th width="10%">Ciudad</th></tr></thead>');if(b.administrador)a("#cabecera").append('<th width="5%"></th><th width="5%"></th>');a("#tabla").append('<tbody id="body_tabla"></tbody>');for(var c=0;c<b.idPrograma.length;c++){a("#body_tabla").append('<tr id="'+b.idPrograma[c]+'"><td>'+(c+1)+'</td><td class="inic_fact">'+b.inicFactura[c]+'</td><td class="nombre_prog">'+b.nombre[c]+'</td><td class="contrato_prog">'+b.contrato[c]+'</td><td class="direccion_prog">'+b.direccion[c]+'</td><td class="ciudad_prog">'+b.ciudad[c]+"</td></tr>");if(b.administrador){a("#"+b.idPrograma[c]).append('<td class="modificar_p"><img src="icons/page_edit.png" alt="" title="Modificar" /></td>');a("#"+b.idPrograma[c]).append('<td class="eliminar_p"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}}a("#tabla").append('<tfoot><tr id="nuevo"><th class="nuevo_p" colspan="6"><img src="icons/page_add.png" alt="" title="Adicionar Registro" /> Nuevo</th></tr></tfoot>');if(b.administrador)a("#nuevo").append("<th></th><th></th>");a("#tabla").tablesorter({widgets:["zebra"]})}}else a("#xsoft").load("login.html");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.porcentaje=function(){a("#cargando").show();a.getJSON("x09/porcentaje.php",{id_porcentaje:"",opc:"all"},function(b){if(b.login){if(b.consulta){a.fn.ocultar();a("#admin_r").show();a("#administracion").slideDown("slow");a("#tabla").append('<thead><tr id="cabecera"><th width="6%">No.</th><th width="15%">Tipo Concepto</th><th width="26%">Concepto</th><th width="13%">Tarifa Iva</th><th width="13%">Retencion Iva</th><th width="13%">Retencion Fuente</th></tr></thead>');if(b.administrador)a("#cabecera").append('<th width="7%"></th><th width="7%"></th>');a("#tabla").append('<tbody id="body_tabla"></tbody>');var c;for(var d=0;d<b.idPorcentaje.length;d++){c=parseInt(b.tipoConcepto[d]);a("#body_tabla").append('<tr id="'+b.idPorcentaje[d]+'"><td>'+(d+1)+'</td><td class="tipo_concepto">'+tipo_concepto[c]+'</td><td class="concepto">'+b.concepto[d]+'</td><td class="t_iva">'+b.tarifaIva[d]+'%</td><td class="r_iva">'+b.retencionIva[d]+'%</td><td class="r_fuente">'+b.retencionFuente[d]+"%</td></tr>");if(b.administrador){a("#"+b.idPorcentaje[d]).append('<td class="modificar_r"><img src="icons/page_edit.png" alt="" title="Modificar" /></td>');a("#"+b.idPorcentaje[d]).append('<td class="eliminar_r"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}}a("#tabla").append('<tfoot><tr id="nuevo"><th class="nuevo_r" colspan="6"><img src="icons/page_add.png" alt="" title="Adicionar Registro" /> Nuevo</th></tr></tfoot>');if(b.administrador)a("#nuevo").append("<th></th><th></th>");a("#tabla").tablesorter({widgets:["zebra"]})}}else a("#xsoft").load("login.html");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.reteica=function(){a("#cargando").show();a.getJSON("x09/reteica.php",{id_reteica:"",opc:"all"},function(b){if(b.login){if(b.consulta){a.fn.ocultar();a("#admin_i").show();a("#administracion").slideDown("slow");a("#tabla").append('<thead><tr id="cabecera"><th width="6%">No.</th><th width="6%">CIIU</th><th width="14%">Tipo Act.</th><th width="40%">Actividad</th><th width="10%">Tarifa</th></tr></thead>');if(b.administrador)a("#cabecera").append('<th width="7%"></th><th width="7%"></th>');a("#tabla").append('<tbody id="body_tabla"></tbody>');var c;for(var d=0;d<b.idReteica.length;d++){c=parseInt(b.tipoActividad[d]);a("#body_tabla").append('<tr id="'+b.idReteica[d]+'"><td>'+(d+1)+'</td><td class="ciiu">'+b.ciiu[d]+'</td><td class="tipo_actividad">'+tipo_actividad[c]+'</td><td class="actividad">'+b.actividad[d]+'</td><td class="tarifa">'+b.tarifa[d]+"</td></tr>");if(b.administrador){a("#"+b.idReteica[d]).append('<td class="modificar_i"><img src="icons/page_edit.png" alt="" title="Modificar" /></td>');a("#"+b.idReteica[d]).append('<td class="eliminar_i"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}}a("#tabla").append('<tfoot><tr id="nuevo"><th class="nuevo_i" colspan="5><img src="icons/page_add.png" alt="" title="Adicionar Registro" /> Nuevo</th></tr></tfoot>');if(b.administrador)a("#nuevo").append("<th></th><th></th>");a("#tabla").tablesorter({widgets:["zebra"]})}}else a("#xsoft").load("login.html");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.usuario=function(){a("#cargando").show();a.getJSON("x09/usuario.php",{id_usuario:"",opc:"all"},function(b){if(b.login){if(b.consulta){a.fn.ocultar();a("#admin_u").show();a("#administracion").slideDown("slow");a("#tabla").append('<thead><tr id="cabecera"><th width="6%">No.</th><th width="20%">Usuario</th><th width="20%">Perfil</th><th width="20%">Nombre</th><th width="20%">Email</th></tr></thead>');if(b.administrador)a("#cabecera").append('<th width="7%"></th><th width="7%"></th>');a("#tabla").append('<tbody id="body_tabla"></tbody>');for(var c=0;c<b.idUser.length;c++){a("#body_tabla").append('<tr id="'+b.idUser[c]+'"><td>'+(c+1)+'</td><td class="user">'+b.user[c]+'</td><td class="perfil_user">'+b.perfil[c]+'</td><td class="nombre_user">'+b.nombre[c]+'</td><td class="email_user">'+b.email[c]+"</td></tr>");if(b.administrador){a("#"+b.idUser[c]).append('<td class="modificar_u"><img src="icons/page_edit.png" alt="" title="Modificar" /></td>');a("#"+b.idUser[c]).append('<td class="eliminar_u"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}}a("#tabla").append('<tfoot><tr id="nuevo"><th class="nuevo_u" colspan="5"><img src="icons/page_add.png" alt="" title="Adicionar Registro" /> Nuevo</th></tr></tfoot>');if(b.administrador)a("#nuevo").append("<th></th><th></th>");a("#tabla").tablesorter({widgets:["zebra"]})}}else a("#xsoft").load("login.html");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.clientes=function(){a("#cargando").show();a.getJSON("x09/cliente.php",{opc:"buscar",nit_persona:"all"},function(b){if(b.login){if(b.consulta){a.fn.ocultar();a("#admin_c").show();a("#administracion").slideDown("slow");a("#tabla").append('<thead><tr id="cabecera"><th width="5%">No.</th><th width="13%">Nit</th><th width="30%">Nombres</th><th width="5%">A.E.</th><th width="37%">Direccion</th></tr></thead>');if(b.administrador)a("#cabecera").append('<th width="5%"></th><th width="5%"></th>');a("#tabla").append('<tbody id="body_tabla"></tbody>');for(var c=0;c<b.idCliente.length;c++){a("#body_tabla").append('<tr id="'+b.idCliente[c]+'"><td>'+(c+1)+'</td><td class="nit_cli">'+b.nitCliente[c]+'</td><td class="nombre_cli">'+b.nombreCliente[c]+'</td><td class="actividad_cli">'+b.actividadEconomica[c]+'</td><td class="direccion_cli">'+b.direccionCliente[c]+"</td></tr>");if(b.administrador){a("#"+b.idCliente[c]).append('<td class="modificar_c"><img src="icons/page_edit.png" alt="" title="Modificar" /></td>');a("#"+b.idCliente[c]).append('<td class="eliminar_c"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}}a("#tabla").append('<tfoot><tr id="nuevo"><th class="nuevo_c" colspan="5"><img src="icons/page_add.png" alt="" title="Adicionar Registro" /> Nuevo</th></tr></tfoot>');if(b.administrador)a("#nuevo").append("<th></th><th></th>");a("#tabla").tablesorter({widgets:["zebra"]})}}else a("#xsoft").load("login.html");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.admin_programa=function(){a("#cargando").show();a(".formlyAlert").remove();a("#guardar_p").attr("disabled","disabled");var b=a("#administrar_p").serialize();a.getJSON("x09/programa.php",b,function(b){if(b.consulta){if(b.opc=="update"){a("#"+b.idPrograma[0]+" > td.inic_fact").html(b.inicFactura[0]);a("#"+b.idPrograma[0]+" > td.nombre_prog").html(b.nombre[0]);a("#"+b.idPrograma[0]+" > td.contrato_prog").html(b.contrato[0]);a("#"+b.idPrograma[0]+" > td.direccion_prog").html(b.direccion[0]);a("#"+b.idPrograma[0]+" > td.ciudad_prog").html(b.ciudad[0]);a("#"+b.idPrograma[0]+" > .modificar_p").html('<img src="icons/page_refresh.png" alt="" title="Modificar" />')}else{a("#body_tabla").append('<tr id="'+b.idPrograma[0]+'"><td>'+(a("#body_tabla tr").length+1)+'</td><td class="inic_fact">'+b.inicFactura[0]+'</td><td class="nombre_prog">'+b.nombre[0]+'</td><td class="contrato_prog">'+b.contrato[0]+'</td><td class="direccion_prog">'+b.direccion[0]+'</td><td class="ciudad_prog">'+b.ciudad[0]+"</td></tr>");if(b.administrador){a("#"+b.idPrograma[0]).append('<td class="modificar_p"><img src="icons/page_edit.png" alt="" title="Modificar" /></td>');a("#"+b.idPrograma[0]).append('<td class="eliminar_p"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}a("#tabla").tablesorter({widgets:["zebra"]});a("#opc_p").attr("value","update");a("#admin_id_programa").attr("value",b.idPrograma[0]);a("#opc_programa").html(" - Modificar:<br>"+b.nombre[0])}a("#"+b.idPrograma[0]+" > .modificar_p").css("background-color","#0054A5")}else{a("#administrar_p").find(".formlyAlerts").append('<div class="formlyInvalid formlyAlert" id="error_p">Error al Actualizar la Informacion.</div>');a("#error_p").fadeIn()}a("#guardar_p").removeAttr("disabled");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#guardar_p").removeAttr("disabled");a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.admin_porcentaje=function(){a("#cargando").show();a(".formlyAlert").remove();a("#guardar_r").attr("disabled","disabled");var b=a("#administrar_r").serialize();a.getJSON("x09/porcentaje.php",b,function(b){if(b.consulta){var c=parseInt(b.tipoConcepto[0]);if(b.opc=="update"){a("#"+b.idPorcentaje[0]+" > td.tipo_concepto").html(tipo_concepto[c]);a("#"+b.idPorcentaje[0]+" > td.concepto").html(b.concepto[0]);a("#"+b.idPorcentaje[0]+" > td.t_iva").html(b.tarifaIva[0]+"%");a("#"+b.idPorcentaje[0]+" > td.r_iva").html(b.retencionIva[0]+"%");a("#"+b.idPorcentaje[0]+" > td.r_fuente").html(b.retencionFuente[0]+"%");a("#"+b.idPorcentaje[0]+" > .modificar_r").html('<img src="icons/page_refresh.png" alt="" title="Modificar" />')}else{a("#body_tabla").append('<tr id="'+b.idPorcentaje[0]+'"><td>'+(a("#body_tabla tr").length+1)+'</td><td class="tipo_concepto">'+tipo_concepto[c]+'</td><td class="concepto">'+b.concepto[0]+'</td><td class="t_iva">'+b.tarifaIva[0]+'%</td><td class="r_iva">'+b.retencionIva[0]+'%</td><td class="r_fuente">'+b.retencionFuente[0]+"%</td></tr>");if(b.administrador){a("#"+b.idPorcentaje[0]).append('<td class="modificar_r"><img src="icons/page_edit.png" alt="" title="Modificar" /></td>');a("#"+b.idPorcentaje[0]).append('<td class="eliminar_r"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}a("#tabla").tablesorter({widgets:["zebra"]});a("#opc_r").attr("value","update");a("#admin_id_porcentaje").attr("value",b.idPorcentaje[0]);a("#opc_porcentaje").html("<br>Modificar: "+b.concepto[0])}a("#"+b.idPorcentaje[0]+" > .modificar_r").css("background-color","#0054A5")}else{a("#administrar_r").find(".formlyAlerts").append('<div class="formlyInvalid formlyAlert" id="error_r">Error: el Concepto ya esta Registrado.</div>');a("#error_r").fadeIn()}a("#guardar_r").removeAttr("disabled");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#guardar_r").removeAttr("disabled");a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.admin_reteica=function(){a("#cargando").show();a(".formlyAlert").remove();a("#guardar_i").attr("disabled","disabled");var b=a("#administrar_i").serialize();a.getJSON("x09/reteica.php",b,function(b){if(b.consulta){var c=parseInt(b.tipoActividad[0]);if(b.opc=="update"){a("#"+b.idReteica[0]+" > td.ciiu").html(b.ciiu[0]);a("#"+b.idReteica[0]+" > td.tipo_actividad").html(tipo_actividad[c]);a("#"+b.idReteica[0]+" > td.actividad").html(b.actividad[0]);a("#"+b.idReteica[0]+" > td.tarifa").html(b.tarifa[0]);a("#"+b.idReteica[0]+" > .modificar_i").html('<img src="icons/page_refresh.png" alt="" title="Modificar" />')}else{a("#body_tabla").append('<tr id="'+b.idReteica[0]+'"><td>'+(a("#body_tabla tr").length+1)+'</td><td class="ciiu">'+b.ciiu[0]+'</td><td class="tipo_actividad">'+tipo_actividad[c]+'</td><td class="actividad">'+b.actividad[0]+'</td><td class="tarifa">'+b.tarifa[0]+"</td></tr>");if(b.administrador){a("#"+b.idReteica[0]).append('<td class="modificar_i"><img src="icons/page_edit.png" alt="" title="Modificar" /></td>');a("#"+b.idReteica[0]).append('<td class="eliminar_i"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}a("#tabla").tablesorter({widgets:["zebra"]});a("#opc_i").attr("value","update");a("#admin_id_reteica").attr("value",b.idReteica[0]);a("#opc_ica").html(" - Modificar:<br>"+b.actividad[0])}a("#"+b.idReteica[0]+" > .modificar_i").css("background-color","#0054A5")}else{a("#administrar_i").find(".formlyAlerts").append('<div class="formlyInvalid formlyAlert" id="error_i">Error: la Actividad ya esta Registrada.</div>');a("#error_i").fadeIn()}a("#guardar_i").removeAttr("disabled");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#guardar_i").removeAttr("disabled");a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.admin_usuario=function(){a("#cargando").show();a(".formlyAlert").remove();a("#guardar_u").attr("disabled","disabled");var b=a("#administrar_u").serialize();a.getJSON("x09/usuario.php",b,function(b){if(b.consulta){if(b.opc=="update"){a("#"+b.idUser[0]+" > td.user").html(b.user[0]);a("#"+b.idUser[0]+" > td.perfil_user").html(b.perfil[0]);a("#"+b.idUser[0]+" > td.nombre_user").html(b.nombre[0]);a("#"+b.idUser[0]+" > td.email_user").html(b.email[0]);a("#"+b.idUser[0]+" > .modificar_u").html('<img src="icons/page_refresh.png" alt="" title="Modificar" />');if(a("#reset_passwd").is(":checked"))alert("Se restablecio la Contrase√±a")}else{a("#body_tabla").append('<tr id="'+b.idUser[0]+'"><td>'+(a("#body_tabla tr").length+1)+'</td><td class="user">'+b.user[0]+'</td><td class="perfil_user">'+b.perfil[0]+'</td><td class="nombre_user">'+b.nombre[0]+'</td><td class="email_user">'+b.email[0]+"</td></tr>");if(b.administrador){a("#"+b.idUser[0]).append('<td class="modificar_u"><img src="icons/page_edit.png" alt="" title="Modificar" /></td>');a("#"+b.idUser[0]).append('<td class="eliminar_u"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}a("#tabla").tablesorter({widgets:["zebra"]});a("#opc_u").attr("value","update");a("#admin_id_usuario").attr("value",b.idUser[0]);a("#reset_passwd").removeAttr("checked");a("#opc_usuario").html(" - Modificar:<br>"+b.user[0]);a.fn.listaProgramas_u()}a("#"+b.idUser[0]+" > .modificar_u").css("background-color","#0054A5")}else{a("#administrar_u").find(".formlyAlerts").append('<div class="formlyInvalid formlyAlert" id="error_u">Error: El Nombre de Usuario ya esta Registrado.</div>');a("#error_u").fadeIn()}a("#guardar_u").removeAttr("disabled");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#guardar_u").removeAttr("disabled");a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.tabla_up=function(b){a("#cargando").show();var c=a("#admin_id_usuario").attr("value");a.getJSON("x09/programa.php",{id_programa:"",tipo_factura:"",opc:"user",id_user:c},function(b){if(b.login){a("#tabla_up").empty();if(b.consulta){a("#tabla_up").append('<thead><tr id="cabecera_up"><th width="10%">No.</th><th width="10%">Tipo</th><th width="70%">Nombre</th></tr></thead>');if(b.administrador)a("#cabecera_up").append('<th width="10%"></th>');a("#tabla_up").append('<tbody id="body_tabla_up"></tbody>');for(var c=0;c<b.idPrograma.length;c++){a("#body_tabla_up").append('<tr id="up_'+b.idPrograma[c]+'"><td>'+(c+1)+'</td><td class="inic_fact_up">'+b.inicFactura[c]+'</td><td class="nombre_prog_up">'+b.nombre[c]+"</td></tr>");a("#programas_u").find("option[value='"+b.idPrograma[c]+"']").remove();if(b.administrador)a("#up_"+b.idPrograma[c]).append('<td class="eliminar_up"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}a("#tabla_up").tablesorter({widgets:["zebra"]})}}else a("#xsoft").load("login.html");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.admin_cliente=function(){a("#cargando").show();a(".formlyAlert").remove();a("#guardar_t").attr("disabled","disabled");var b=a("#administrar_c").serialize();a.getJSON("x09/cliente.php",b,function(b){if(b.consulta){if(b.opc=="update"){a("#"+b.idCliente[0]+" > td.nit_cli").html(b.nitCliente[0]);a("#"+b.idCliente[0]+" > td.nombre_cli").html(b.nombreCliente[0]);a("#"+b.idCliente[0]+" > td.direccion_cli").html(b.direccionCliente[0]);a("#"+b.idCliente[0]+" > td.actividad_cli").html(b.actividadEconomica[0]);a("#"+b.idCliente[0]+" > .modificar_c").html('<img src="icons/page_refresh.png" alt="" title="Modificar" />')}else{a("#body_tabla").append('<tr id="'+b.idCliente[0]+'"><td>'+(a("#body_tabla tr").length+1)+'</td><td class="nit_cli">'+b.nitCliente[0]+'</td><td class="nombre_cli">'+b.nombreCliente[0]+'</td><td class="actividad_cli">'+b.actividadEconomica[0]+'</td><td class="direccion_cli">'+b.direccionCliente[0]+"</td></tr>");if(b.administrador){a("#"+b.idCliente[0]).append('<td class="modificar_c"><img src="icons/page_edit.png" alt="" title="Modificar" /></td>');a("#"+b.idCliente[0]).append('<td class="eliminar_c"><img src="icons/page_delete.png" alt="" title="Eliminar" /></td>')}a("#tabla").tablesorter({widgets:["zebra"]});a("#opc_t").attr("value","update");a("#admin_id_persona").attr("value",b.idCliente[0]);a("#opc_tercero").html(" - Modificar:<br>"+b.nombreCliente[0])}a("#"+b.idCliente[0]+" > .modificar_c").css("background-color","#0054A5")}else{a("#administrar_c").find(".formlyAlerts").append('<div class="formlyInvalid formlyAlert" id="error_t">Error: El Nit ya esta Registrado.</div>');a("#error_t").fadeIn()}a("#guardar_t").removeAttr("disabled");a("#cargando").delay(400).slideUp(1)}).error(function(){a("#guardar_t").removeAttr("disabled");a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})(jQuery);(function(a){a.fn.password=function(){a.fn.ocultar();a("#cambiar_c").show();a("#administracion").show("slow")}})(jQuery);(function(a){a.fn.borrar_p=function(){a(".appriseOverlay").remove();a(".appriseOuter").remove();var b=a(this).parent().attr("id");apprise("<strong>Eliminar Programa: </strong>"+a("#"+b+" .inic_fact").text()+" - "+a("#"+b+" .nombre_prog").text()+"<br><br>Esta seguro de Eliminar el Programa?",{verify:true,textYes:"Si",textNo:"No"},function(c){if(c){a("#cargando").show();a.getJSON("x09/programa.php",{id_programa:b,tipo_factura:"",opc:"delete"},function(b){if(b.login){if(b.consulta){a("#"+b.idPrograma).remove();a("#tabla").tablesorter({widgets:["zebra"]});alert("Programa eliminado Correctamente")}else alert("Error: No se puede Eliminar el Programa "+b.mensaje)}a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})}})(jQuery);(function(a){a.fn.borrar_r=function(){a(".appriseOverlay").remove();a(".appriseOuter").remove();var b=a(this).parent().attr("id");apprise("<strong>Eliminar Porcentaje Retencion: </strong>"+a("#"+b+" .concepto").text()+"<br><br>Esta seguro de Eliminar el Porcentaje Retencion?",{verify:true,textYes:"Si",textNo:"No"},function(c){if(c){a("#cargando").show();a.getJSON("x09/porcentaje.php",{id_porcentaje:b,opc:"delete"},function(b){if(b.login){if(b.consulta){a("#"+b.idPorcentaje).remove();a("#tabla").tablesorter({widgets:["zebra"]});alert("Porcentaje Retencion eliminado Correctamente")}else alert("Error: No se puede Eliminar el Porcentaje Retencion")}a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})}})(jQuery);(function(a){a.fn.borrar_i=function(){a(".appriseOverlay").remove();a(".appriseOuter").remove();var b=a(this).parent().attr("id");apprise("<strong>Eliminar Tarifa Ica: </strong>"+a("#"+b+" .actividad").text()+"<br><br>Esta seguro de Eliminar la Tarifa Ica?",{verify:true,textYes:"Si",textNo:"No"},function(c){if(c){a("#cargando").show();a.getJSON("x09/reteica.php",{id_reteica:b,opc:"delete"},function(b){if(b.login){if(b.consulta){a("#"+b.idReteica).remove();a("#tabla").tablesorter({widgets:["zebra"]});alert("Tarifa Ica eliminada Correctamente")}else alert("Error: No se puede Eliminar la Tarifa Ica")}a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})}})(jQuery);(function(a){a.fn.borrar_u=function(){a(".appriseOverlay").remove();a(".appriseOuter").remove();var b=a(this).parent().attr("id");apprise("<strong>Eliminar Usuario: </strong>"+a("#"+b+" .user").text()+"<br><br>Esta seguro de Eliminar el Usuario?",{verify:true,textYes:"Si",textNo:"No"},function(c){if(c){a("#cargando").show();a.getJSON("x09/usuario.php",{id_usuario:b,opc:"delete"},function(b){if(b.login){if(b.consulta){a("#"+b.idUser).remove();a("#tabla").tablesorter({widgets:["zebra"]});alert("Usuario eliminado Correctamente")}else alert("Error: No se puede Eliminar el Usuario "+b.mensaje)}a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})}})(jQuery);(function(a){a.fn.borrar_up=function(){a(".appriseOverlay").remove();a(".appriseOuter").remove();var b=a(this).parent().attr("id");apprise("<strong>Eliminar Programa - Usuario: </strong>"+a("#"+b+" .inic_fact_up").text()+" - "+a("#"+b+" .nombre_prog_up").text()+"<br><br>Esta seguro de Eliminar el Programa?",{verify:true,textYes:"Si",textNo:"No"},function(c){if(c){a("#cargando").show();b=b.split("_");var d=b[1];var e=a("#admin_id_usuario").attr("value");a.getJSON("x09/programa.php",{id_programa:d,tipo_factura:"",opc:"delete_up",id_user:e},function(b){if(b.login){a.fn.listaProgramas_u();if(b.consulta)alert("Programa eliminado Correctamente");else alert("Error: No se puede Eliminar el Programa")}a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})}})(jQuery);(function(a){a.fn.borrar_c=function(){a(".appriseOverlay").remove();a(".appriseOuter").remove();var b=a(this).parent().attr("id");apprise("<strong>Eliminar Tercero: </strong>"+a("#"+b+" .nombre_cli").text()+"<br><br>Esta seguro de Eliminar el Tercero?",{verify:true,textYes:"Si",textNo:"No"},function(c){if(c){a("#cargando").show();a.getJSON("x09/cliente.php",{nit_persona:"",opc:"delete",id_persona:b},function(b){if(b.login){if(b.consulta){a("#"+b.idCliente).remove();a("#tabla").tablesorter({widgets:["zebra"]});alert("Tercero eliminado Correctamente")}else alert("Error: No se puede eliminar el Tercero "+b.mensaje)}a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})}})(jQuery);(function(a){a.fn.borrar_f=function(){a(".appriseOverlay").remove();a(".appriseOuter").remove();var b=a(this).parent().attr("id");apprise("<strong>Eliminar Factura: </strong>No. "+a("#"+b+" .cargar_factura").text()+" - Programa: "+a("#"+b+" .nombre_prog").text()+"<br>Nombre Tercero: "+a("#"+b+" .nombre_cli").text()+"<br><br>Esta seguro de Eliminar la Factura?",{verify:true,textYes:"Si",textNo:"No"},function(c){if(c){a("#cargando").show();a.getJSON("x09/buscar_factura.php",{numero_factura:"@eliminar",id_programa:"",id_factura:b},function(b){if(b.login){if(b.consulta){a("#"+b.idFactura).remove();a("#tabla").tablesorter({widgets:["zebra"]});alert("Factura eliminada Correctamente")}else alert("Error: No se puede Eliminar la Factura")}a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})}})(jQuery);(function(a){a.fn.cambiar_numero_f=function(){a(".appriseOverlay").remove();a(".appriseOuter").remove();var b=a(this).parent().attr("id");apprise("<strong>Factura: </strong>No. "+a("#"+b+" .cargar_factura").text()+" - Programa: "+a("#"+b+" .nombre_prog").text()+"<br>Nombre Tercero: "+a("#"+b+" .nombre_cli").text()+"<br><br><strong>Cambiar Numero: </strong>Digite el numero de la Factura",{input:true,verify:true,textOk:"Cambiar",textCancel:"Cancelar"},function(c){if(c){if(typeof c=="string"){if(!isNaN(c)){a("#cargando").show();a.getJSON("x09/buscar_factura.php",{numero_factura:"@cambiar",id_programa:"",id_factura:b,numero_nuevo:c},function(b){if(b.login){if(b.consulta){a("#"+b.idFactura[0]+" > td.cargar_factura").html(b.numeroFactura[0]);a("#"+b.idFactura[0]+" > .modificar_f").css("background-color","#0054A5")}else alert("Error: No se puede Cambiar el numero de la Factura")}a("#cargando").delay(400).slideUp(1)}).error(function(){a("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}else alert("Digite un Numero Valido")}}})}})(jQuery);$(document).ready(function(){$.getJSON("x09/sesion.php",function(a){$("#xsoft").load(a.url)}).error(function(){alert("Error: Compruebe la conexion de red de su equipo")});$("#sal").live("click",function(){$(".appriseOverlay").remove();$(".appriseOuter").remove();apprise("Esta seguro de Salir?",{animate:true,verify:true,textYes:"Si",textNo:"No"},function(a){if(a){$("#cargando").show();$.getJSON("x09/cerrar_sesion.php",function(a){$("#xsoft").load(a.url);$("#cargando").delay(400).slideUp(1)}).error(function(){$("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})}})});$("#fe").live("click",function(){$.fn.factura(1)});$("#cm").live("click",function(){$.fn.factura(2)});$("#bf").live("click",function(){$("#formato").hide();$("#administracion").hide();$.fn.buscar()});$("#pro").live("click",function(){$("#formato").hide();$("#administracion").hide();$.fn.programa()});$("#pr").live("click",function(){$("#formato").hide();$("#administracion").hide();$.fn.porcentaje()});$("#tr").live("click",function(){$("#formato").hide();$("#administracion").hide();$.fn.reteica()});$("#usu").live("click",function(){$("#formato").hide();$("#administracion").hide();$.fn.usuario()});$("#ter").live("click",function(){$("#formato").hide();$("#administracion").hide();$.fn.clientes()});$("#cc").live("click",function(){$("#formato").hide();$("#administracion").hide();$.fn.password()});$("#cancelar").live("click",function(){$.fn.limpiar()});$("#cancelar_b").live("click",function(){$("#programas").find('option[value="0"]').attr("selected","selected")});$("#cancelar_p,#cancelar_r,#cancelar_i,#cancelar_t,#cancelar_c").live("click",function(){$("#administracion").hide()});$("#cancelar_u").live("click",function(){$("#administracion").hide();$("#programas_u").empty()});$("#mostrar_r").live("click",function(){$("#tabla_up").empty();$("#admin_p").hide();$("#admin_r").hide();$("#admin_i").hide();$("#admin_u").hide();$("#admin_c").hide();$("#cambiar_c").hide();$("#formato").hide();$("#buscar").show();$("#administracion").slideDown("slow");$("#buscar_factura").submit()});$(".formato_factura").live("click",function(){$("#mostrar").empty();$("#id_programa").attr("value",$(this).attr("id"));$("#nombre_factura").html($(this).text());$("#contrato_factura").html($(this).attr("title"));$("#direccion_factura").html($(this).attr("alt"));$("#copia_contrato_factura").html($(this).attr("title"));$("#copia_direccion_factura").html($(this).attr("alt"));$("#administracion").hide("slow");$("#formato").slideDown("slow")});$(".nuevo_p").live("click",function(){$("#opc_p").attr("value","insert");$("#tipo_programa").find('option[value="1"]').attr("selected","selected");$("#admin_id_programa").attr("value","");$("#nombre_programa").attr("value","");$("#contrato_programa").attr("value","");$("#direccion_programa").attr("value","");$("#ciudad_programa").attr("value","");$("#nombre_programa").focus();$("#opc_programa").html(" - Nuevo")});$(".nuevo_r").live("click",function(){$("#opc_r").attr("value","insert");$("#admin_id_porcentaje").attr("value","");$("#concepto").attr("value","");$("#admin_tarifa_iva").attr("value","");$("#admin_tarifa_reteiva").attr("value","");$("#admin_tarifa_retefuente").attr("value","");$("#concepto").focus();$("#opc_porcentaje").html(" - Nuevo")});$(".nuevo_i").live("click",function(){$("#opc_i").attr("value","insert");$("#admin_id_reteica").attr("value","");$("#ciiu").attr("value","");$("#actividad").attr("value","");$("#tarifa_ica").attr("value","");$("#actividad").focus();$("#opc_ica").html(" - Nuevo")});$(".nuevo_u").live("click",function(){$("#opc_u").attr("value","insert");$("#admin_id_usuario").attr("value","");$("#admin_usuario").attr("value","");$("#admin_nombre_usuario").attr("value","");$("#admin_email").attr("value","");$("#tipo_usuario").find('option[value="1"]').attr("selected","selected");$("#admin_usuario").focus();$("#opc_usuario").html(" - Nuevo")});$(".nuevo_c").live("click",function(){$("#opc_t").attr("value","insert");$("#admin_id_persona").attr("value","");$("#admin_nit_persona").attr("value","");$("#admin_persona_natural").attr("value","");$("#admin_actividad_economica").attr("value","");$("#admin_direccion_persona").attr("value","");$("#admin_nit_persona").focus();$("#opc_tercero").html(" - Nuevo")});$(".modificar_p").live("click",function(){$("#cargando").show();var a=$(this).parent().attr("id");$("#"+a+" .modificar_p").addClass("actual");$("#"+a+" .actual").removeClass("modificar_p");$.getJSON("x09/programa.php",{id_programa:a,tipo_factura:"",opc:""},function(b){if(b.login){if(b.consulta){$("#opc_p").attr("value","update");$("#tipo_programa").find('option[value="'+b.idTipoFactura[0]+'"]').attr("selected","selected");$("#admin_id_programa").attr("value",b.idPrograma[0]);$("#nombre_programa").attr("value",b.nombre[0]);$("#contrato_programa").attr("value",b.contrato[0]);$("#direccion_programa").attr("value",b.direccion[0]);$("#ciudad_programa").attr("value",b.ciudad[0]);$("#nombre_programa").focus();$("#opc_programa").html(" - Modificar:<br>"+b.nombre[0])}}else $("#xsoft").load("login.html");$("#"+a+" .actual").addClass("modificar_p");$("#"+a+" .modificar_p").removeClass("actual");$("#cargando").delay(400).slideUp(1)}).error(function(){$("#"+a+" .actual").addClass("modificar_p");$("#"+a+" .modificar_p").removeClass("actual");$("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})});$(".modificar_r").live("click",function(){$("#cargando").show();var a=$(this).parent().attr("id");$("#"+a+" .modificar_r").addClass("actual");$("#"+a+" .actual").removeClass("modificar_r");$.getJSON("x09/porcentaje.php",{id_porcentaje:a,opc:""},function(b){if(b.login){if(b.consulta){$("#opc_r").attr("value","update");$("#admin_id_porcentaje").attr("value",b.idPorcentaje[0]);$("#tipo_concepto").find('option[value="'+b.tipoConcepto[0]+'"]').attr("selected","selected");$("#concepto").attr("value",b.concepto[0]);$("#admin_tarifa_iva").attr("value",b.tarifaIva[0]);$("#admin_tarifa_reteiva").attr("value",b.retencionIva[0]);$("#admin_tarifa_retefuente").attr("value",b.retencionFuente[0]);$("#concepto").focus();$("#opc_porcentaje").html("<br>Modificar: "+b.concepto[0])}}else $("#xsoft").load("login.html");$("#"+a+" .actual").addClass("modificar_r");$("#"+a+" .modificar_r").removeClass("actual");$("#cargando").delay(400).slideUp(1)}).error(function(){$("#"+a+" .actual").addClass("modificar_r");$("#"+a+" .modificar_r").removeClass("actual");$("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})});$(".modificar_i").live("click",function(){$("#cargando").show();var a=$(this).parent().attr("id");$("#"+a+" .modificar_i").addClass("actual");$("#"+a+" .actual").removeClass("modificar_i");$.getJSON("x09/reteica.php",{id_reteica:a,opc:""},function(b){if(b.login){if(b.consulta){$("#opc_i").attr("value","update");$("#admin_id_reteica").attr("value",b.idReteica[0]);$("#ciiu").attr("value",b.ciiu[0]);$("#tipo_actividad").find('option[value="'+b.tipoActividad[0]+'"]').attr("selected","selected");$("#actividad").attr("value",b.actividad[0]);$("#tarifa_ica").attr("value",b.tarifa[0]);$("#actividad").focus();$("#opc_ica").html(" - Modificar:<br>"+b.actividad[0])}else alert("e")}else $("#xsoft").load("login.html");$("#"+a+" .actual").addClass("modificar_i");$("#"+a+" .modificar_i").removeClass("actual");$("#cargando").delay(400).slideUp(1)}).error(function(){$("#"+a+" .actual").addClass("modificar_i");$("#"+a+" .modificar_i").removeClass("actual");$("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})});$(".modificar_u").live("click",function(){$("#cargando").show();var a=$(this).parent().attr("id");$("#"+a+" .modificar_u").addClass("actual");$("#"+a+" .actual").removeClass("modificar_u");$.getJSON("x09/usuario.php",{id_usuario:a,opc:""},function(b){if(b.login){if(b.consulta){$("#opc_u").attr("value","update");$("#admin_id_usuario").attr("value",b.idUser[0]);$("#admin_usuario").attr("value",b.user[0]);$("#admin_nombre_usuario").attr("value",b.nombre[0]);$("#admin_email").attr("value",b.email[0]);$("#tipo_usuario").find('option[value="'+b.idPerfil[0]+'"]').attr("selected","selected");$("#reset_passwd").removeAttr("checked");$("#admin_usuario").focus();$("#opc_usuario").html(" - Modificar:<br>"+b.user[0]);$.fn.listaProgramas_u()}}else $("#xsoft").load("login.html");$("#"+a+" .actual").addClass("modificar_u");$("#"+a+" .modificar_u").removeClass("actual");$("#cargando").delay(400).slideUp(1)}).error(function(){$("#"+a+" .actual").addClass("modificar_u");$("#"+a+" .modificar_u").removeClass("actual");$("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})});$(".modificar_c").live("click",function(){$("#cargando").show();var a=$(this).parent().attr("id");$("#"+a+" .modificar_c").addClass("actual");$("#"+a+" .actual").removeClass("modificar_c");$.getJSON("x09/cliente.php",{nit_persona:"",opc:"",id_persona:a},function(b){if(b.login){if(b.consulta){$("#opc_t").attr("value","update");$("#admin_id_persona").attr("value",b.idCliente[0]);$("#admin_nit_persona").attr("value",b.nitCliente[0]);$("#admin_persona_natural").attr("value",b.nombreCliente[0]);$("#admin_actividad_economica").attr("value",b.actividadEconomica[0]);$("#admin_direccion_persona").attr("value",b.direccionCliente[0]);$("#admin_nit_persona").focus();$("#opc_tercero").html(" - Modificar:<br>"+b.nombreCliente[0])}}else $("#xsoft").load("login.html");$("#"+a+" .actual").addClass("modificar_c");$("#"+a+" .modificar_c").removeClass("actual");$("#cargando").delay(400).slideUp(1)}).error(function(){$("#"+a+" .actual").addClass("modificar_c");$("#"+a+" .modificar_c").removeClass("actual");$("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})});$(".modificar_f").live("click",function(){$(this).cambiar_numero_f()});$(".cargar_cliente").live("click",function(){$("#id_persona").attr("value",$(this).attr("id"));$("#persona_natural").attr("value",$(this).text());$("#nit_persona").attr("value",$(this).attr("title"));$("#direccion_persona").attr("value",$(this).attr("alt"));$("#actividad_economica").attr("value",$(this).attr("label"));$("#buscar_nombre_cliente").attr("value","");$("#mostrar_n").empty()});$(".cargar_factura").live("click",function(){$("#cargando").show();var a=$(this).parent().attr("id");$("#"+a+" .cargar_factura").addClass("actual");$("#"+a+" .actual").removeClass("cargar_factura");$.getJSON("x09/buscar_factura.php",{numero_factura:"@cargar",id_programa:"",id_factura:a},function(b){if(b.login){if(b.consulta){$("#id_programa").attr("value",b.idPrograma[0]);if(b.inicFactura[0]=="FE")b.inicFactura[0]="No.";$("#inic_factura").html(b.inicFactura[0]);$("#desc_factura").html(b.tipoFactura[0]);$("#nombre_factura").html(b.nombrePrograma[0]);$("#contrato_factura").html(b.contrato[0]);$("#direccion_factura").html(b.direccion[0]);$("#copia_inic_factura").html(b.inicFactura[0]);$("#copia_desc_factura").html(b.tipoFactura[0]);$("#copia_contrato_factura").html(b.contrato[0]);$("#copia_direccion_factura").html(b.direccion[0]);$("#administracion").hide();$("#formato").slideDown("slow");$.fn.cargar(b)}}else $("#xsoft").load("login.html");$("#"+a+" .actual").addClass("cargar_factura");$("#"+a+" .cargar_factura").removeClass("actual");$("#cargando").delay(400).slideUp(1)}).error(function(){$("#"+a+" .actual").addClass("cargar_factura");$("#"+a+" .cargar_factura").removeClass("actual");$("#cargando").delay(400).slideUp(1);alert("Error: Compruebe la conexion de red de su equipo")})});$(".eliminar_p").live("click",function(){$(this).borrar_p()});$(".eliminar_r").live("click",function(){$(this).borrar_r()});$(".eliminar_i").live("click",function(){$(this).borrar_i()});$(".eliminar_u").live("click",function(){$(this).borrar_u()});$(".eliminar_up").live("click",function(){$(this).borrar_up()});$(".eliminar_c").live("click",function(){$(this).borrar_c()});$(".eliminar_f").live("click",function(){$(this).borrar_f()})})