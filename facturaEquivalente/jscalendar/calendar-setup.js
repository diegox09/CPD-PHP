/*Copyright Mihai Bazon, 2002-2005 | www.bazon.net/mishoo The DHTML Calendar, version 1.0*/
Calendar.setup=function(a){function e(a){var b=a.params;var c=a.dateClicked||b.electric;if(c&&b.inputField){b.inputField.value=a.date.print(b.ifFormat);if(typeof b.inputField.onchange=="function")b.inputField.onchange()}if(c&&b.displayArea)b.displayArea.innerHTML=a.date.print(b.daFormat);if(c&&typeof b.onUpdate=="function")b.onUpdate(a);if(c&&b.flat){if(typeof b.flatCallback=="function")b.flatCallback(a)}if(c&&b.singleClick&&a.dateClicked)a.callCloseHandler()}function b(b,c){if(typeof a[b]=="undefined"){a[b]=c}}b("inputField",null);b("displayArea",null);b("button",null);b("eventName","click");b("ifFormat","%Y/%m/%d");b("daFormat","%Y/%m/%d");b("singleClick",true);b("disableFunc",null);b("dateStatusFunc",a["disableFunc"]);b("dateText",null);b("firstDay",null);b("align","Br");b("range",[1900,2999]);b("weekNumbers",true);b("flat",null);b("flatCallback",null);b("onSelect",null);b("onClose",null);b("onUpdate",null);b("date",null);b("showsTime",false);b("timeFormat","24");b("electric",true);b("step",2);b("position",null);b("cache",false);b("showOthers",false);b("multiple",null);var c=["inputField","displayArea","button"];for(var d in c){if(typeof a[c[d]]=="string"){a[c[d]]=document.getElementById(a[c[d]])}}if(!(a.flat||a.multiple||a.inputField||a.displayArea||a.button)){alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false}if(a.flat!=null){if(typeof a.flat=="string")a.flat=document.getElementById(a.flat);if(!a.flat){alert("Calendar.setup:\n  Flat specified but can't find parent.");return false}var f=new Calendar(a.firstDay,a.date,a.onSelect||e);f.showsOtherMonths=a.showOthers;f.showsTime=a.showsTime;f.time24=a.timeFormat=="24";f.params=a;f.weekNumbers=a.weekNumbers;f.setRange(a.range[0],a.range[1]);f.setDateStatusHandler(a.dateStatusFunc);f.getDateText=a.dateText;if(a.ifFormat){f.setDateFormat(a.ifFormat)}if(a.inputField&&typeof a.inputField.value=="string"){f.parseDate(a.inputField.value)}f.create(a.flat);f.show();return false}var g=a.button||a.displayArea||a.inputField;g["on"+a.eventName]=function(){var b=a.inputField||a.displayArea;var c=a.inputField?a.ifFormat:a.daFormat;var d=false;var f=window.calendar;if(b)a.date=Date.parseDate(b.value||b.innerHTML,c);if(!(f&&a.cache)){window.calendar=f=new Calendar(a.firstDay,a.date,a.onSelect||e,a.onClose||function(a){a.hide()});f.showsTime=a.showsTime;f.time24=a.timeFormat=="24";f.weekNumbers=a.weekNumbers;d=true}else{if(a.date)f.setDate(a.date);f.hide()}if(a.multiple){f.multiple={};for(var g=a.multiple.length;--g>=0;){var h=a.multiple[g];var i=h.print("%Y%m%d");f.multiple[i]=h}}f.showsOtherMonths=a.showOthers;f.yearStep=a.step;f.setRange(a.range[0],a.range[1]);f.params=a;f.setDateStatusHandler(a.dateStatusFunc);f.getDateText=a.dateText;f.setDateFormat(c);if(d)f.create();f.refresh();if(!a.position)f.showAtElement(a.button||a.displayArea||a.inputField,a.align);else f.showAt(a.position[0],a.position[1]);return false};return f}